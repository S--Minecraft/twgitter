package twgitter.croudia;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import twgitter.croudia.config.Config;
import twgitter.get.GetHTTP;

import com.google.gson.Gson;

public class Streaming {
	//curl -k -H "Host: api.croudia.com" -H "Authorization: Bearer 58546eb740bf61f818e1e8fe1b136f45710d6a06ede4cfbf7426da89072b2d42" https://api.croudia.com/statuses/home_timeline.json

	public static void main(String args[]) throws Exception {

		String URI = "https://api.croudia.com/statuses/home_timeline.json";
		String[][] Header = { {"Host", "api.croudia.com"}, {"Authorization", "Bearer " + Config.access_token} };
		String CharCode = "UTF-8";
		Gson gson = new Gson();
		List<String> json = new ArrayList<>();
		StringBuilder jsonGettingToString = new StringBuilder();
		Date nowGet = new Date();

		json = GetHTTP.AccessHTTPString(URI,Header,CharCode);

		for(int i=0;i<json.size();i++)
		{
			//System.out.println("A :" + json.get(i));
			jsonGettingToString.append(json.get(i));
		}

		//System.out.println();
		//System.out.println("A :" + jsonGettingToString);

		String jsonString = jsonGettingToString.toString();

		//AppNetStream stream = gson.fromJson(jsonString.toString(),AppNetStream.class);


		/*
		for(int i=stream.getData().size()-1;i>=0;i--)
		{
			nowGet = stream.getData().get(i).getCreated_atDate();
			if(nowGet.after(lastDate))
			{
				//System.out.println(lastDate);
				//System.out.println(nowGet);

				User user = stream.getData().get(i).getUser();
				String name;
				if(user.getName() == null)
				{
					name = user.getUsername();
				}else{
					name = user.getName();
				}

				if(stream.getData().get(i).getText() != null)
				{
					System.out.println("[App.net][" + name + "(@" + user.getUsername()  + ")]" + stream.getData().get(i).getText());
				}
			}
		}

		Date lastGet = new Date();
		lastGet = stream.getData().get(0).getCreated_atDate();

		return lastGet;
		*/
	}
}
