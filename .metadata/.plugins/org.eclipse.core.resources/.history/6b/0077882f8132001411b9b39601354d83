package twgitter;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.User;
import twitter4j.conf.ConfigurationBuilder;

public class Samlple1 {
	public static void main(String[] args) throws IOException, TwitterException
	{
		ConfigurationBuilder cb = new ConfigurationBuilder();
		cb.setDebugEnabled(true)
		  .setOAuthConsumerKey("K90wYRef2WCoSEH9Jae69VC0e")
		  .setOAuthConsumerSecret("mq45WQOnQ1zjpY2UPKcxoY2OBut4zAxSaSQs6jyECAFsk8aj7r")
		  .setOAuthAccessToken("2410039153-ycYIlcyOsjYzmsoyqaOvrC3MmT8sXAT4fZkdYRB")
		  .setOAuthAccessTokenSecret("8cU8FW6GQ5elcK67yYP5Vuv8O1GDDVci63iRUZqQwG09r");

		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		String tweet = "";
		while(tweet.isEmpty()) {
			System.out.print("今何してる ? : ");
			tweet = br.readLine();
			if(tweet.length() > 140) {
				System.out.println("字数制限を超えています。");
				tweet = "";
				continue;
			}
		}

		Twitter twitter = new TwitterFactory(cb.build()).getInstance();
		Status status = twitter.tweets().updateStatus(tweet);
		User user = status.getUser();
		System.out.println(user.getScreenName() + " として投稿しました : " + status.getText());

		//ユーザ情報取得
		System.out.println("なまえ　　　：" + user.getName());
		System.out.println("ひょうじ名　：" + user.getScreenName());
		System.out.println("ふぉろー数　：" + user.getFriendsCount());
		System.out.println("ふぉろわー数：" + user.getFollowersCount());

    }
}
