package twgitter.slack;

import java.util.List;

import twgitter.get.GetHTTP;
import twgitter.slack.config.Config;

import com.google.gson.Gson;

public class GetUsers {
	public static String getUsers() throws Exception {
		String URI = "https://slack.com/api/users.list?token=" + Config.token;
		List<String> json = GetHTTP.AccessHTTPString(URI);

		String jsonString = json.get(0);

		return jsonString;
	}

	public static List<User> jsonToUser(String json) {
		Gson gson = new Gson();
		UserFirst userFirst = gson.fromJson(json.toString(),UserFirst.class);
		List<User> users = userFirst.getMembers();
		return users;
	}

	public static String userIdToName(String id, List<User> users) {
		String name = "Couldn't find name...";

		String a = "";

		for(int i=0;i<users.size();i++)
		{
			System.out.println(users.get(i).getId());
			System.out.println(users.get(i).getName());
			if(id == users.get(i).getId())
			{
				 a = users.get(i).getName();
				System.out.println(users.get(i).getId());
				System.out.println(users.get(i).getName());
			}
		}
		name = a;

		return name;
	}
}
