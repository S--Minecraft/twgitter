package twgitter.get;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URI;
import java.net.URLConnection;
import java.util.Map;

public class GetHTTP {
	public static String AccessHTTP(String URI,String[][] Header) throws Exception {
		String out;
    	// 引数からURIを生成
        URI uri = new URI(URI);

        // URI -> URL -> URLConnection の順で接続インスタンスを取得
        URLConnection connection = uri.toURL().openConnection();

        //ヘッダ設定
        for(int i=0;i<Header.length;i++)
        {
        	connection.setRequestProperty(Header[i][1] ,Header[i][2]);
        }


        // ヘッダ情報を出力
        Map headers = connection.getHeaderFields();
        for (Object key : headers.keySet()) {
            System.out.println(key + ": " + headers.get(key));
        }

        // コンテンツを出力
        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream(), "JISAutoDetect"));
        String buffer = reader.readLine();
        //System.out.println();
        out = "";
        while (null != buffer) {
            //System.out.println(buffer);
            //buffer = reader.readLine();
        	out = "buffer";
        }

        return out;
    }
}
